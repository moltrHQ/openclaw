version: "3.8"

services:
  openclaw:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: openclaw-gateway
    restart: unless-stopped
    env_file:
      - .env
    ports:
      - "127.0.0.1:18789:18789"
    volumes:
      - openclaw-data:/root/.openclaw
    healthcheck:
      test: ["CMD", "openclaw", "gateway", "health"]
      interval: 30s
      timeout: 10s
      retries: 3

  # Optional: Moltr Security Shield
  # Auskommentieren wenn Moltr genutzt werden soll
  #
  # moltr:
  #   image: python:3.11-slim
  #   container_name: moltr-security
  #   restart: unless-stopped
  #   working_dir: /app
  #   command: >
  #     bash -c "pip install -r requirements.txt &&
  #              uvicorn main:app --host 0.0.0.0 --port 8420"
  #   ports:
  #     - "127.0.0.1:8420:8420"
  #   volumes:
  #     - ./moltr:/app

volumes:
  openclaw-data:
